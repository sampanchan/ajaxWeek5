{"version":3,"sources":["yelp.js"],"names":["YelpApi","evt","preventDefault","console","log","term","document","querySelector","value","location","radius","sort","price","querySelectorAll","priceArray","x","l","length","push","priceTerm","join","open","openNow","checked","data","_ep","sort_by","open_now","headers","Authorization","API_KEY","axios","get","API_BASE_URL","params","then","processResults","results","businesses","articleContainer","createElement","setAttribute","classResults","appendChild","i","business","name","photo","image_url","rating","transactionType","transactions","businessItemEl","nameEl","textContent","display_address","locationEl","photoEl","category","categories","categoryEl","map","cat","title","priceEL","ratingEl","transactionEL","setUpListener","form","addEventListener","handleSearch"],"mappings":"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","sourcesContent":["class YelpApi{\n\n    API_KEY = 'Tow02LN0q2c-t3X-Sq8qlJOMtFc7-tmsGglB_PJ927cw4FMErKxZI8EJN5FaAFuZGL5_6USYexsippLsH5f8NOurISqUA02NvVF_zWYeoocmtlhSUZsqy8d4esl9YHYx'\n    API_BASE_URL = 'https://circuslabs.net/proxies/yelp-fusion-proxy/'\n\n    constructor(){\n\n        this.setUpListener()\n    }\n\n    setUpListener(){\n        const form = document.querySelector('form[name=\"business_search\"]')\n        form.addEventListener('submit', this.handleSearch)\n\n    }\n\n    handleSearch = (evt) => {\n        evt.preventDefault()\n        console.log('searching....')\n\n        const term = document.querySelector('input[name=\"term\"]').value\n        const location = document.querySelector('input[name=\"location\"]').value\n        const radius = document.querySelector('input[name=\"radius\"]').value\n        console.log(radius)\n        // ASK GREG for conversion\n        const sort = document.querySelector('[name=\"sort-by\"]').value\n        const price = document.querySelectorAll('[name=\"dollar\"]:checked')\n        \n        const priceArray= []\n        for (let x = 0, l = price.length; x<l; x++ ){\n            priceArray.push(price[x].value)\n            // console.log(price[x])\n        }\n        if(price.length === 0 ){\n            priceTerm === 0\n        }\n        else{\n            var priceTerm = priceArray.join(\", \")\n        }\n        console.log(priceTerm)\n\n        const open = document.querySelector('[name=\"open-now\"]')\n        var openNow = open.checked\n       \n        \n        const data ={\n            _ep: '/businesses/search',\n            term: term,\n            location: location,\n            sort_by: sort,\n            radius: radius,\n            price: priceTerm,\n            open_now: openNow,\n\n        }\n        const headers = {\n            Authorization: `Bearer ${this.API_KEY}`\n        }\n\n        axios.get(this.API_BASE_URL, { params: data, headers: headers }).then(this.processResults)\n    }\n\n    processResults = (data) => {\n\n        const results = data.data.businesses\n        console.log('we got data!', results)\n      \n\n        //parent container\n\n        const articleContainer = document.createElement('div');\n        articleContainer.setAttribute('class', 'business-Container');\n        const classResults = document.querySelector('.classResults')\n        classResults.appendChild( articleContainer);\n\n        //loop for businesses\n        console.log(results.length)\n        for (let i = 0; i < results.length; i++ ){\n\n\n            const business = results[i]\n            const name = business.name\n            const photo = business.image_url\n            const price = business.price\n            const rating = business.rating\n            const transactionType = business.transactions\n            \n\n            // Business Item\n            const businessItemEl = document.createElement('div');\n            businessItemEl.setAttribute('class', 'business-item');\n            articleContainer.appendChild(businessItemEl);\n\n            //Name\n            const nameEl = document.createElement('h2');\n            businessItemEl.appendChild(nameEl);\n            nameEl.textContent = name;\n\n            //location \n            const location = business.location.display_address\n            const locationEl =document.createElement('h3');\n            businessItemEl.appendChild(locationEl);\n            locationEl.textContent = location;\n\n            //image \n            const photoEl = document.createElement('img');\n            businessItemEl.appendChild(photoEl);\n            photoEl.setAttribute('src', photo);\n\n            //categories\n            const category = business.categories\n            const categoryEl = document.createElement('h4');\n            businessItemEl.appendChild(categoryEl);\n            categoryEl.textContent = category.map((cat) => cat.title).join('\\n');\n            businessItemEl.appendChild(categoryEl);\n\n            //price\n            const priceEL = document.createElement('p');\n            priceEL.setAttribute('class', 'dollar-sign-price');\n            businessItemEl.appendChild(priceEL);\n            priceEL.textContent = price;\n\n            //rating\n            const ratingEl = document.createElement('p');\n            ratingEl.setAttribute('class', 'rating');\n            businessItemEl.appendChild(ratingEl);\n            ratingEl.textContent = rating + 'ðŸ˜‰';\n\n            //transaction\n            const transactionEL = document.createElement('p');\n            transactionEL.setAttribute('class', 'transaction_type');\n            businessItemEl.appendChild(transactionEL);\n            transactionEL.textContent = transactionType;\n\n        }\n    }\n}"],"file":"yelp.js"}